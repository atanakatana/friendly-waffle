<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Admin Lapak - V3 (Mobile)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <style>
    body {
      background-color: #f8f9fa;
    }

    /* Progress bar yang menempel di atas */
    .progress-container {
      position: sticky;
      top: 0;
      background-color: #f8f9fa;
      padding: 1rem 0;
      z-index: 100;
      border-bottom: 1px solid #dee2e6;
    }
  </style>
</head>

<body>
  <!-- Versi ini adalah alur "Wizard" satu tugas, tanpa navigasi -->
  <main class="container py-4">
    <header class="d-flex justify-content-between align-items-center pb-3 mb-0">
      <div>
        <h4 class="mb-0">Laporan Harian</h4>
        <p class="text-muted mb-0 small" id="current-date-lapak">Kamis, 6 November 2025</p>
      </div>
      <button class="btn btn-outline-danger" onclick="handleLogout()">
        <i class="bi bi-box-arrow-right"></i>
      </button>
    </header>

    <!-- Progress Bar Steps -->
    <div class="progress-container">
      <div class="d-flex justify-content-between small text-muted mb-2">
        <span>Langkah 1: Atur</span>
        <span>Langkah 2: Isi</span>
        <span>Langkah 3: Kirim</span>
      </div>
      <div class="progress" style="height: 10px;">
        <!-- Ganti width jadi 33%, 66%, 100% sesuai progres -->
        <div class="progress-bar" role="progressbar" style="width: 33%;" id="report-progress"></div>
      </div>
    </div>
    
    <div id="laporan-exists" class="alert alert-success text-center mt-4" style="display: none;">
      <i class="bi bi-check-circle-fill me-2"></i>
      Laporan untuk hari ini sudah terkirim!
    </div>

    <!-- Konten Alur Laporan (Single Column) -->
    <div id="laporan-content" class="mt-4">
      <!-- Card Atur Produk -->
      <div class="card shadow-sm mb-4">
        <div class="card-body p-4">
          <h5 class="card-title fw-bold"><i class="bi bi-box-seam-fill text-primary me-2"></i>Langkah 1: Atur Produk</h5>
          <p class="card-text text-muted mb-2">Mulai dengan memilih produk & stok awal.</p>
          <button class="btn btn-primary" onclick="openAturProdukModal()">
            <i class="bi bi-ui-checks-grid me-2"></i> Atur Produk
          </button>
          <button class="btn btn-outline-secondary ms-2" onclick="showPage('history-laporan-page')">
            <i class="bi bi-clock-history me-2"></i> History
          </button>
        </div>
      </div>

      <!-- Card Isi Laporan -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-white py-3">
          <h5 class="mb-0"><i class="bi bi-pencil-square text-success me-2"></i>Langkah 2: Isi Laporan Stok Akhir</h5>
        </div>
        <div class="card-body p-4">
          <p class="text-muted">Isi kolom "Stok Akhir" untuk setiap produk.</p>
          <div id="report-tables-container" class="mt-3">
            <div id="initial-prompt" class="text-center text-muted p-4 border rounded">
              <i class="bi bi-table" style="font-size: 2rem;"></i>
              <p class="mt-2 mb-0">Tabel laporan akan muncul di sini.</p>
            </div>
            <!-- Tabel akan di-generate oleh JS di sini -->
          </div>
        </div>
      </div>

      <!-- Card Ringkasan & Kirim -->
      <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
          <h5 class="mb-0"><i class="bi bi-clipboard2-check-fill text-info me-2"></i>Langkah 3: Ringkasan & Kirim</h5>
        </div>
        <div class="card-body p-4">
          <h6><i class="bi bi-cash-stack"></i> Input Penjualan Manual</h6>
          <div class="input-group mb-2">
            <span class="input-group-text" style="width: 60px">QRIS</span>
            <span class="input-group-text">Rp</span>
            <input type="text" class="form-control" id="rekap-qris" placeholder="0" inputmode="numeric" />
          </div>
          <div class="input-group mb-2">
            <span class="input-group-text" style="width: 60px">BCA</span>
            <span class="input-group-text">Rp</span>
            <input type="text" class="form-control" id="rekap-bca" placeholder="0" inputmode="numeric" />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" style="width: 60px">CASH</span>
            <span class="input-group-text">Rp</span>
            <input type="text" class="form-control" id="rekap-cash" placeholder="0" inputmode="numeric" />
          </div>
          <hr>
          <h6><i class="bi bi-check2-circle"></i> Konfirmasi Total</h6>
          <ul class="list-group mb-3">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Total (Sistem):
              <strong id="total-sistem" class="text-primary fs-5">Rp 0</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              Total (Manual):
              <strong id="total-manual" class="text-primary fs-5">Rp 0</strong>
            </li>
          </ul>
          <div id="reconciliation-warning" class="alert alert-danger p-2 text-center small" style="display: none;">
            <i class="bi bi-exclamation-triangle-fill"></i> Total tidak sesuai!
          </div>
          <div class="d-grid">
            <button id="kirim-laporan-btn" class="btn btn-success btn-lg" disabled>
              <i class="bi bi-send-fill me-2"></i> Kirim Laporan Hari Ini
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Placeholder
    function handleLogout() { console.log("Logout clicked"); }
    function showPage(page) { console.log("Navigating to:", page); }
    function openAturProdukModal() { console.log("Opening Atur Produk Modal"); }
    document.getElementById("current-date-lapak").textContent = new Date().toLocaleDateString("id-ID", {
      weekday: "long", year: "numeric", month: "long", day: "numeric",
    });
  </script>
</body>

</html>