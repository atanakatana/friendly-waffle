{% extends "base.html" %}
{% block title %}Analisis Grafik Pendapatan & Biaya{% endblock %}

{% block content %}

<div id="owner-chart-page" class="page container py-4">
  <header class="d-flex align-items-center pb-3 mb-4 border-bottom">
    <button class="btn btn-light me-3" onclick="showPage('owner-dashboard')"><i class="bi bi-arrow-left"></i></button>
    <h4 class="mb-0">Analisis Grafik Pendapatan & Biaya</h4>
  </header>

  <div class="row g-3 mb-4 align-items-end p-3 bg-light border rounded">
    <div class="col-md-5">
      <label for="chart-month-select" class="form-label">Bulan</label>
      <select id="chart-month-select" class="form-select">
        <option value="1">Januari</option>
        <option value="2">Februari</option>
        <option value="3">Maret</option>
        <option value="4">April</option>
        <option value="5">Mei</option>
        <option value="6">Juni</option>
        <option value="7">Juli</option>
        <option value="8">Agustus</option>
        <option value="9">September</option>
        <option value="10">Oktober</option>
        <option value="11">November</option>
        <option value="12">Desember</option>
      </select>
    </div>
    <div class="col-md-5">
      <label for="chart-year-select" class="form-label">Tahun</label>
      <select id="chart-year-select" class="form-select"></select>
    </div>
    <div class="col-md-2 d-grid">
      <button id="chart-filter-btn" class="btn btn-primary">
        <i class="bi bi-search"></i> Tampilkan
      </button>
    </div>
  </div>

  <div id="chart-loading" class="text-center p-5" style="display: none;">
    <div class="spinner-border text-primary"></div>
    <p class="mt-2 text-muted">Memuat data grafik...</p>
  </div>

  <div id="chart-content">
    <div class="row">
      <div class="col-lg-6 mb-4">
        <h5 class="text-center text-success mb-3">Grafik Pendapatan Harian</h5>
        <canvas id="pendapatanChart"></canvas>
      </div>
      <div class="col-lg-6 mb-4">
        <h5 class="text-center text-danger mb-3">Grafik Biaya Supplier Harian</h5>
        <canvas id="biayaChart"></canvas>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/owner.js') }}"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    initializeOwnerChartPage();
  });
</script>
{% endblock %}